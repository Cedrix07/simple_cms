<% @page_title = "View Page List" %>

<%= link_to("<< Back to subjects", {:controller => 'subjects', :action => 'index'}, :class => 'back-link') %>

<div class="pages index">
    <h2>Pages </h2>
    <%= link_to("Add new Page", {:action => 'new', :subject_id => @subject.id}, :class => 'action new') %>

    <table class="listing" summary="Page list">
        <tr class="header">
            <th>subject</th>
            <th>Page</th>
            <th>Permalink</th>
            <th>Visible</th>
            <th>Sections</th>
            <th>Actions</th>
        </tr>

        <% @pages.each do |page| %>
        <tr>
            <td><%= page.subject.name if page.subject %></td>
            <td><%= page.name %></td>
              <td><%= page.permalink %></td>
            <td class="center">
                <%=  status_tag(page.visible) %>
            </td>
            <td><%= page.sections.size %></td>
            <td class="actions">
                 <%= link_to("View sections", {:controller => 'sections', :page_id => page.id}, :class => 'action show') %>
                <%= link_to("Show", {:action => 'show', :id => page.id, :subject_id => @subject.id}, :class => 'action show') %>
                <%= link_to("Edit", {:action => 'edit', :id => page.id, :subject_id => @subject.id}, :class => 'action edit') %>
                <%= link_to("Delete", {:action => 'delete', :id => page.id, :subject_id => @subject.id}, :class => 'action delete') %>
            </td>
        </tr>
        <% end %>
    </table>
    <div>
        <p>Total Page Found: <strong><%= pluralize(@pages.size, 'Pages' )%> </strong></p>
    </div>
</div>